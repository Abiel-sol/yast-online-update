<HTML>
<HEAD>
<TITLE>YOU agent</TITLE>
</HEAD>
<BODY>
<H1>YOU agent</H1>
<HR>
<H2>Purpose</H2>
The YOU agent handles all patches which have to get from server and <br>
decides which packages have to be installed.
<P>
If the path cannot be recognized, <TT>void</TT> is returned.
<P>
<H2>Implementation</H2>
The agent handles all patches and their packages in the directory <br>
/var/lib/YaST/patches.
<P>
<H2>Execute() Commands</H2>
<H3>.you.setEnvironment</H3>
Initialize the agent with the environment.<BR>
<BR>
Argument: $[ string language, string architecture, string rootpath, string yastpath, string patchpath ]<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute (.you.setEnvironment, $["language":"german","architecture":"i386","rootpath":"/","yastpath":"/var/lib/YaST",
"patchpath":"/var/lib/YaST/patches"] )</TT>
<P>
<H3>.you.setServer</H3>
Setting server.<BR>
<BR>
Argument: $[string kind, string name, string path]<BR>
<TT>kind</TT>: "ftp", "http", "cd", "CD", "harddisk", "local", "nfs", "Net"<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute(.you.setServer, $["kind":"ftp", "name":"ftp.suse.com", "path":"/pub/suse"])</TT><BR>
<P>
<H3>.you.connect</H3>
Connect to selected server, harddisk, CD ......<BR>
<BR>
Argument: none<BR>
<BR>
Returns: $[ "ok": false, "message","Connection refused" ]<BR>
<BR>
Usage: <TT>Execute(.you.connect, nil)</TT><BR>
<P>
<H3>.you.disconnect</H3>
Disconnect from selected server.<BR>
<BR>
Argument: none<BR>
<BR>
Returns: $[ "ok": false, "message","not connected" ]<BR>
<BR>
Usage: <TT>Execute (.you.disconnect, nil)</TT><BR>
<P>
<H3>.you.getPatch</H3>
Reading patch with all RPMs from server.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns: $[ "ok": false, "message":"not connected", "nextPackage": &lt;package-path&gt;, "nextPackageSize":&lt;byte&gt;,
"nextSerie":&lt;serie&gt;]<BR>
<BR>
Usage: <TT>Execute (.you.getPatch, "you-1")</TT><BR>
<P>
<H3>.you.getPatchList</H3>
Reading the patchlist from server.<BR>
<BR>
Argument: none<BR>
<BR>
Returns:  $[ "ok": false, "message","not connected", "continue": false, "progress": 10, "checkpatch": "aaa_base-1"]<BR>
<BR>
Usage: <TT>Execute (.you.getPatchList)</TT><BR>
<P>
<H3>.you.closeUpdate</H3>
Writes the status of the current installation.<BR>
<BR>
Argument: boolean success<BR>
<BR>
Returns: true or false<BR>
<BR>
Usage: <TT>Execute (.you.closeUpdate, true)</TT><BR>
<P>
<H3>.you.checkYaST2Version</H3>
Check, if the patch works with the currrent installed YaST2 version.<BR>
<BR>
Argument:  string installedYaST2Version, string patchname<BR>
<BR>
Returns: $[ "ok": false, "minYaST2Version","1.0.0" ] <BR>
<Br>
Usage: <TT>Execute (.you.checkYaST2Version, "4.2.3", "you-1" )</TT><BR>
<P>
<H3>.you.checkAuthorization</H3>
Checking authorization of the user.<BR>
<BR>
Argument:  string password, string registrationCode<BR>
<BR>
Returns: string "ok"/"error_login"/"error_path"<BR>
<Br>
Usage: <TT>Execute (.you.checkAuthorization, "sadfasdf", "12345" )</TT><BR>
<P>
<H3>.you.deletePackages</H3>
Deletes all packages of a patch.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns: true or false<BR>
<BR>
Usage: <TT>Execute (.you.deletePackages, "you-1" )</TT><BR>
<P>
<H2>Read() commands</H2>
<P>
<H3>.you.lastUpdateStatus</H3>
Evaluate last update status.<BR>
<BR>
Argument: none<BR>
<BR>
Returns: $[ "days":"3","status":"ok",<BR>
    "patches":[ &lt;patch-ID1&gt;, &lt;patch-mode1&gt;, &lt;patch-description1&gt;,<BR>
	     &lt;update-date1&gt;,&lt;status1&gt;<BR>
             &lt;patch-ID2&gt;, &lt;patch-mode2&gt;, &lt;patch-description2&gt;,<BR>
	     &lt;update-date2&gt;,&lt;status2&gt;...	]]<BR>
<BR>
Usage: <TT>Read (.you.lastUpdateStatus, nil )</TT><BR>
<P>
<H3>.you.newPatchList</H3>
Evaluate patchlist.<BR>
<BR>
Argument: none<BR>
<BR>
Returns: $[ &lt;patch-ID1&gt;:[&lt;patch-mode1&gt;,&lt;patch-description1&gt;,&lt;size1&gt;,&lt;install&gt;],<BR>
    &lt;patch-ID2&gt;:[&lt;patch-mode2&gt;,&lt;patch-description2&gt;,&lt;size2&gt;,&lt;install&gt;],...<BR>
<BR>
Usage: <TT>Read (.you.newPatchList, nil )</TT><BR>
<P>
<H3>.you.patchInformation</H3>
Evaluate all information about the patch.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns:   $[ "description":"text","packages":<BR>
     $[&lt;package-name1&gt;:[&lt;description1&gt;,&lt;installed-version1&gt;,&lt;new-version1&gt;],<BR>
       &lt;package-name2&gt;:[&lt;description2&gt;,&lt;installed-version2&gt;,&lt;new-version2&gt;],<BR>
       ..  ]]<BR>
<BR>
Usage: <TT>Read (.you.patchInformation, "you-2" )</TT><BR>
<P>
<H3>.you.preInstallInformation</H3>
Returns Information about the patch BEFORE the packages will be installed.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns:   string<BR>
<BR>
Usage: <TT>Read (.you.preInstallInformation, "you-2" )</TT><BR>
<P>
<H3>.you.postInstallInformation</H3>
Returns Information about the patch AFTER the packages have been installed.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns:   string<BR>
<BR>
Usage: <TT>Read (.you.postInstallInformation, "you-2" )</TT><BR>
<P>
<H3>.you.packages</H3>
Returns a list of packages ( with path ) which belong to the patch.<BR>
<BR>
Argument: string patchname<BR>
<BR>
Returns:   list of lists like [&lt;instpath&gt;,&lt;shortdescription&gt;,&lt;packagename&gt;]<BR>
<BR>
Usage: <TT>Read (.you.packages, "you-2" )</TT><BR>
<P>
<H3>.you.isBusiness</H3>
Returns true if the installed system is a business product.<BR>
<BR>
Argument: none<BR>
<BR>
Returns:  true/false<BR>
<BR>
Usage: <TT>Read (.you.isBusiness)</TT><BR>
<P>
<H3>.you.productInfo</H3>
Getting SuSE product informations.<BR>
<BR>
Argument: none<BR>
<BR>
Returns:  map like [ "Distribution_Verison":"7.2","Product_Version":"3.0", "Product_Name":"Email Server" ] <BR>
<BR>
Usage: <TT>Read (.you.productInfo)</TT><BR>
<P>
<P>
<H2>Write() commands</H2>
<P>
<H3>.you.patchUpdateStatus</H3>
Writes the installation status of a patch.<BR>
<BR>
Argument: string patchname, string "error"/"installed"<BR>
<BR>
Returns:   true or false<BR>
<BR>
Usage: <TT>Write (.you.patchUpdateStatus, "you-2", "installed" )</TT><BR>
<P>
</BODY>
</HTML>
